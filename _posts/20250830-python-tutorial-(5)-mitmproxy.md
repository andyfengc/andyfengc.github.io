# Introduction
`mitmproxy` æ˜¯ä¸€ä¸ªå¼€æºçš„ **äº¤äº’å¼ HTTPS æŠ“åŒ…/è°ƒè¯•ä»£ç†å·¥å…·**ï¼ŒåŠŸèƒ½ç±»ä¼¼ Fiddlerã€Charlesï¼Œä½†æ›´åå‘ **å¼€å‘è€…å’Œè‡ªåŠ¨åŒ–åœºæ™¯**ã€‚
- **è·¨å¹³å°**ï¼šæ”¯æŒ Windows / macOS / Linuxã€‚    
- **å…è´¹å¼€æº**ï¼šä¸åƒ Charlesã€Fiddler Everywhere é‚£æ ·æœ‰æ”¶è´¹é™åˆ¶ã€‚    
- **æ”¯æŒ HTTP/1ã€HTTP/2ã€WebSocket**ï¼ŒHTTPS ä¹Ÿèƒ½è§£å¯†ã€‚    
- **å¯äº¤äº’æ“ä½œ**ï¼šå¸¦æœ‰ä¸€ä¸ªç±»ä¼¼æ§åˆ¶å°çš„ TUIï¼ˆæ–‡æœ¬ç•Œé¢ï¼‰ï¼Œå¯ä»¥å®æ—¶æ‹¦æˆªã€ä¿®æ”¹ã€æ”¾è¡Œè¯·æ±‚ã€‚    
- **å¼ºå¤§è„šæœ¬æ‰©å±•**ï¼šæ”¯æŒç”¨ **Python è„šæœ¬** è‡ªå®šä¹‰è¯·æ±‚/å“åº”çš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚æ”¹å‚æ•°ã€æ›¿æ¢è¿”å›å€¼ã€åšè‡ªåŠ¨æµ‹è¯•ã€‚    
- **å¯ä½œä¸ºåº“ä½¿ç”¨**ï¼šä½ ç”šè‡³å¯ä»¥ç›´æ¥æŠŠ mitmproxy å½“æˆ Python æ¨¡å—ï¼Œå†™è‡ªåŠ¨åŒ–æµ‹è¯•æˆ–æ•°æ®é‡‡é›†è„šæœ¬ã€‚
- **å¼€æºå…è´¹**ï¼šMIT åè®®ã€‚
- **æ ¸å¿ƒåŠŸèƒ½**ï¼š    
    - æŠ“å– HTTP/HTTPS æµé‡ï¼ˆæ”¯æŒ TLS è¯ä¹¦ç”Ÿæˆä¸å®‰è£…ï¼‰ã€‚        
    - å‘½ä»¤è¡Œ / Web / å›¾å½¢ç•Œé¢ 3 ç§äº¤äº’æ–¹å¼ã€‚        
    - å¯ç”¨ Python è„šæœ¬ç¼–å†™æ’ä»¶ï¼Œå¯¹æµé‡è¿›è¡Œæ‹¦æˆªã€ä¿®æ”¹ã€åˆ†æã€‚        
    - å¯ä¿å­˜æµé‡åˆ°æ–‡ä»¶ (`.mitm`)ï¼Œæ–¹ä¾¿ç¦»çº¿åˆ†æã€‚
## åº”ç”¨åœºæ™¯
- æŠ“åŒ…åˆ†æ App/ç½‘é¡µçš„ HTTPS è¯·æ±‚ã€‚    
- è°ƒè¯• API æ¥å£ã€‚    
- æµé‡åŠ«æŒæµ‹è¯• / å®‰å…¨æµ‹è¯•ã€‚    
- è‡ªåŠ¨åŒ–ä¿®æ”¹ HTTP æµé‡ï¼ˆå¹¿å‘Šè¿‡æ»¤ã€æ¥å£ mockï¼‰ã€‚    
- æ•°æ®é‡‡é›†ï¼ˆé…åˆ Python æ’ä»¶ï¼‰ã€‚
- è°ƒè¯•æ‰‹æœº APP è¯·æ±‚ï¼Œåˆ†æ APIã€‚    
- è‡ªåŠ¨ç¯¡æ”¹å“åº”æ•°æ®åšæµ‹è¯•ã€‚    
- å†™ Python è„šæœ¬æ¨¡æ‹Ÿ/ä¿®æ”¹æµé‡ï¼Œåšè‡ªåŠ¨åŒ– API Mockã€‚    
- ä½œä¸ºå®‰å…¨æµ‹è¯•å·¥å…·ï¼ˆæ£€æµ‹æµé‡æ˜¯å¦è¢«ç¯¡æ”¹ã€éªŒè¯ API åŠ å¯†ç­‰ï¼‰ã€‚
## Install
```
pip install mitmproxy
```
![](images/posts/20250830-Fiddler-Tutorial.jpeg)
# ä½¿ç”¨
å¸¸ç”¨ç»„ä»¶ï¼š
- `mitmproxy` â€”â€” äº¤äº’å¼æ§åˆ¶å°æ¨¡å¼, å‘½ä»¤è¡Œ UIï¼ˆç±»ä¼¼ Wireshark çš„ CLI ç•Œé¢ï¼‰ã€‚    
- `mitmdump` â€”â€” æ— ç•Œé¢çš„ç‰ˆæœ¬ï¼Œæ–¹ä¾¿è„šæœ¬å’Œè‡ªåŠ¨åŒ–, ç±»ä¼¼ tcpdumpï¼Œå‘½ä»¤è¡Œè¾“å‡ºæµé‡ã€‚    
- `mitmweb` â€”â€” å¸¦æµè§ˆå™¨ Web ç•Œé¢ï¼Œæµè§ˆå™¨æŸ¥çœ‹ä¸æ§åˆ¶ï¼Œæ¯”è¾ƒé€‚åˆä¹ æƒ¯å›¾å½¢åŒ–çš„äººã€‚

## è¯ä¹¦å®‰è£…ï¼ˆHTTPS æŠ“åŒ…å¿…åšï¼‰
å½“ä½ ç¬¬ä¸€æ¬¡è¿è¡Œ `mitmproxy` æˆ– `mitmweb` æ—¶ï¼Œå®ƒä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€å¥— CA æ ¹è¯ä¹¦ï¼š
- Windows: `C:\Windows\UserName\.mitmproxy\`    
- Linux/Mac: `~/.mitmproxy/`    
![](images/posts/20250830-Fiddler-Tutorial-5.jpeg)
ä¸»è¦æ–‡ä»¶ï¼š
- `mitmproxy-ca-cert.pem` ï¼ˆæ ¹è¯ä¹¦ï¼Œç”¨æ¥å¯¼å…¥ç³»ç»Ÿæˆ–æµè§ˆå™¨ï¼‰    
- `mitmproxy-ca.pem`    
- `mitmproxy-ca-cert.cer` ï¼ˆWindows/æ‰‹æœºæ›´å¸¸ç”¨ï¼‰
### åœ¨æµè§ˆå™¨ä¸­å®‰è£…è¯ä¹¦
ğŸ”¹ Chrome / Edgeï¼ˆåŸºäºç³»ç»Ÿè¯ä¹¦ï¼‰
1. æ‰“å¼€ **è®¾ç½® â†’ éšç§å’Œå®‰å…¨ â†’ å®‰å…¨ â†’ ç®¡ç†è¯ä¹¦**    
2. åˆ‡åˆ° **å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„**    
3. ç‚¹å‡» **å¯¼å…¥**ï¼Œé€‰æ‹© `mitmproxy-ca-cert.cer`    
4. ç¡®è®¤åé‡å¯æµè§ˆå™¨å³å¯    
chrome://settings/security > Manage certificates > æŸ¥çœ‹è¯ä¹¦ > installed by you > import > 
![](images/posts/20250830-Fiddler-Tutorial-7.jpeg)
![](images/posts/20250830-Fiddler-Tutorial-8.jpeg)
![](images/posts/20250830-Fiddler-Tutorial-10.jpeg)
ğŸ”¹ Firefoxï¼ˆç‹¬ç«‹è¯ä¹¦åº“ï¼‰
5. æ‰“å¼€ **è®¾ç½® â†’ éšç§ä¸å®‰å…¨ â†’ è¯ä¹¦ â†’ æŸ¥çœ‹è¯ä¹¦**    
6. è¿›å…¥ **Authoritiesï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰**    
7. ç‚¹å‡» **å¯¼å…¥**ï¼Œé€‰æ‹© `mitmproxy-ca-cert.pem`    
8. å‹¾é€‰ â€œä¿¡ä»»æ­¤ CA æ¥æ ‡è¯†ç½‘ç«™â€ â†’ ç¡®è®¤

### å®‰è£…ç³»ç»Ÿè¯ä¹¦:
 æ­£å¸¸å¯åŠ¨ mitmproxy
åœ¨å‘½ä»¤è¡Œé‡Œè¿è¡Œï¼š
`mitmproxy`
é»˜è®¤ç›‘å¬ `127.0.0.1:8080`ã€‚ç»ˆç«¯é‡Œä¼šæ˜¾ç¤ºï¼š
`Proxy server listening at http://*:8080`

è®©æµè§ˆå™¨èµ° mitmproxy
ä½ éœ€è¦æŠŠæµè§ˆå™¨çš„ä»£ç†æ”¹æˆ mitmproxyï¼š
- **Chrome/Edge/ç³»ç»Ÿä»£ç†è®¾ç½®**ï¼š    
    1. æ‰“å¼€ Windows è®¾ç½® â†’ ç½‘ç»œå’Œ Internet â†’ ä»£ç†ã€‚        
    2. æ‰“å¼€ â€œä½¿ç”¨ä»£ç†æœåŠ¡å™¨â€ã€‚        
    3. åœ°å€å¡«ï¼š`127.0.0.1`ï¼Œç«¯å£ï¼š`8080`ã€‚        
    4. ä¿å­˜ã€‚        
- æˆ–è€…ç”¨ **Proxifier**ï¼Œè®©æµè§ˆå™¨èµ° 127.0.0.1:8080ã€‚

![](images/posts/20250918.jpeg)
ä»£ç†è®¾ç½®å¥½åï¼Œå†æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
`http://mitm.it`
è¿™æ—¶ mitmproxy ä¼šæ‹¦æˆªå¹¶è¿”å›è¯ä¹¦å®‰è£…é¡µé¢ã€‚ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªä¸‹è½½é€‰é¡¹åˆ—è¡¨ï¼ˆWindows / Mac / Android / iOSï¼‰ã€‚
![](images/posts/20250918-1.jpeg)
![](images/posts/20250918-2.jpeg)
![](images/posts/20250918-3.jpeg)

1. ä¸‹è½½ **Windows è¯ä¹¦æ–‡ä»¶**ï¼ˆä¸€èˆ¬æ˜¯ `mitmproxy-ca-cert.cer`ï¼‰ã€‚    
2. åŒå‡»æ–‡ä»¶ â†’ å®‰è£…è¯ä¹¦ã€‚    
3. é€‰æ‹©ï¼š    
    - å­˜å‚¨ä½ç½®ï¼š**æœ¬åœ°è®¡ç®—æœº(local machine)**ï¼ˆå¦‚æœæç¤ºéœ€è¦ç®¡ç†å‘˜æƒé™å°±ç¡®è®¤ï¼‰ã€‚        
    - å­˜å‚¨åˆ°ï¼š**å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„**ã€‚        
4. è£…å¥½ä¹‹åï¼Œå¯ä»¥é‡æ–°å¯åŠ¨ä¸€æ¬¡æµè§ˆå™¨ã€‚    

æµ‹è¯•è¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ
- æ‰“å¼€ä¸€ä¸ª HTTPS ç½‘ç«™ï¼ˆæ¯”å¦‚ https://example.comï¼‰ï¼Œåœ¨ mitmproxy ç•Œé¢é‡Œåº”è¯¥èƒ½çœ‹åˆ°å®Œæ•´è§£å¯†åçš„è¯·æ±‚å’Œå“åº”ã€‚    
- å¦‚æœè¿˜æ˜¯ CONNECT éš§é“æ²¡æœ‰è§£å¯†ï¼Œè¦æ£€æŸ¥è¯ä¹¦æ˜¯å¦çœŸçš„å®‰è£…åˆ° â€œå—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„â€ã€‚

âš ï¸ æ³¨æ„ï¼š
- **åªæœ‰æµé‡ç»è¿‡ mitmproxyï¼Œæ‰èƒ½å®‰è£…è¯ä¹¦**ï¼Œæ‰€ä»¥ä¸€å®šè¦å…ˆæ”¹ä»£ç†ã€‚    
- å¦‚æœåªæ˜¯ç›´æ¥è®¿é—® mitm.itï¼Œè€Œæ²¡æœ‰è®¾ç½®ä»£ç†ï¼Œå°±ä¼šå‡ºç°ä½ çœ‹åˆ°çš„æç¤ºã€‚
### åœ¨æ‰‹æœºä¸­å®‰è£…è¯ä¹¦
ğŸ”¹ Android
1. è®¿é—® `http://mitm.it`ï¼ˆæ‰‹æœºéœ€èµ°ä»£ç†åˆ° mitmproxyï¼‰
    
2. ä¸‹è½½ Android æä¾›çš„ `.cer` æ–‡ä»¶    
3. æ‰“å¼€ **è®¾ç½® â†’ å®‰å…¨ â†’ åŠ å¯†ä¸å‡­æ® â†’ å®‰è£…è¯ä¹¦**
    
4. å®‰è£…ä¸º **VPN å’Œåº”ç”¨è¯ä¹¦**
    
5. âš ï¸ Android 7.0+ é»˜è®¤**ä¸å†ä¿¡ä»»ç”¨æˆ·è¯ä¹¦**ï¼Œé™¤éåº”ç”¨æ˜ç¡®å…è®¸ â†’ å¦‚æœè¦æŠ“ HTTPS APPï¼Œéœ€è¦ **root + ä¿®æ”¹ç³»ç»Ÿè¯ä¹¦å­˜å‚¨**ï¼Œæˆ–ç”¨ Frida/VirtualApp ç­‰ç»•è¿‡
    
ğŸ”¹ iOS
6. åœ¨ Safari æ‰“å¼€ `http://mitm.it`    
7. ä¸‹è½½è¯ä¹¦ï¼ˆä¼šæç¤ºâ€œå·²ä¸‹è½½æè¿°æ–‡ä»¶â€ï¼‰    
8. æ‰“å¼€ **è®¾ç½® â†’ é€šç”¨ â†’ æè¿°æ–‡ä»¶ â†’ å®‰è£…**    
9. å®‰è£…å®Œæˆåï¼Œè¿˜è¦åˆ° **è®¾ç½® â†’ é€šç”¨ â†’ å…³äºæœ¬æœº â†’ è¯ä¹¦ä¿¡ä»»è®¾ç½®**    
10. å‹¾é€‰åˆšåˆšå¯¼å…¥çš„ `mitmproxy` æ ¹è¯ä¹¦ï¼Œå¯ç”¨â€œå®Œå…¨ä¿¡ä»»â€



### éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ
1. åœ¨ç›®æ ‡è®¾å¤‡/æµè§ˆå™¨ä¸Šè®¿é—® `https://example.com`    
2. mitmproxy æ§åˆ¶å°åº”è¯¥èƒ½è§£å¯†å‡º HTTPS å†…å®¹    
3. å¦‚æœæç¤º `certificate error`ï¼Œè¯´æ˜è¯ä¹¦æœªæ­£ç¡®å¯¼å…¥æˆ–æœªå¯ç”¨ä¿¡ä»»
![](images/posts/20250830-Fiddler-Tutorial-11.jpeg)
![](images/posts/20250830-Fiddler-Tutorial-9.jpeg)

4. å¯åŠ¨ mitmproxy åï¼Œæµè§ˆå™¨æˆ–æ‰‹æœºé…ç½®ä»£ç†ä¸º **ç”µè„‘IP:8080**ã€‚    
5. åœ¨è¢«ä»£ç†çš„è®¾å¤‡æµè§ˆå™¨é‡Œè®¿é—®ï¼š    
    `http://mitm.it`    
6. é€‰æ‹©å¯¹åº”ç³»ç»Ÿä¸‹è½½å¹¶å®‰è£…è¯ä¹¦ï¼š    
    - Windows / macOSï¼šåŒå‡»è¯ä¹¦ï¼Œå¯¼å…¥åˆ°ç³»ç»Ÿâ€œå—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„â€ã€‚        
    - Androidï¼šä¸‹è½½åå®‰è£…ï¼Œæˆ–æ‰‹åŠ¨æ”¾åˆ° `/system/etc/security/cacerts/`ã€‚        
    - iOSï¼šè®¾ç½® â†’ é€šç”¨ â†’ æè¿°æ–‡ä»¶ä¸è®¾å¤‡ç®¡ç† â†’ å®‰è£…è¯ä¹¦ â†’ ä¿¡ä»»ã€‚
### æ³¨æ„äº‹é¡¹
- å®‰è£… CA è¯ä¹¦ç›¸å½“äºä¿¡ä»» mitmproxyï¼Œå¯è§£å¯†æ‰€æœ‰ HTTPSï¼Œâš ï¸ åªåœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼
1. è¯ä¹¦å®‰è£…ä»…é™äº **æµ‹è¯•ç¯å¢ƒ**ï¼Œä¸è¦éšæ„åœ¨ç”Ÿäº§ç¯å¢ƒå®‰è£… CAã€‚    
2. éƒ¨åˆ†åº”ç”¨ï¼ˆå¦‚é“¶è¡Œ Appï¼‰å¯ç”¨äº† **è¯ä¹¦å›ºå®šï¼ˆCertificate Pinningï¼‰**ï¼Œéœ€è¦é¢å¤–å·¥å…·ç»•è¿‡ï¼ˆFrida/Xposedï¼‰ã€‚    
3. æ¨èç”¨ **mitmweb**ï¼ˆ`mitmweb -p 8080`ï¼‰ï¼Œèƒ½å›¾å½¢åŒ–æŸ¥çœ‹è¯·æ±‚å“åº”ï¼Œæ›´ç›´è§‚ã€‚
4. é•¿æœŸä½¿ç”¨å»ºè®® **å•ç‹¬è®¾ç½®è™šæ‹Ÿæœº/æµ‹è¯•æœº**ï¼Œé¿å…æ±¡æŸ“ä¸»ç¯å¢ƒã€‚

## å¯åŠ¨ Web ç•Œé¢ï¼ˆæœ€å¸¸ç”¨ï¼‰
```
mitmweb
```
![](images/posts/20250830-Fiddler-Tutorial-1.jpeg)
![](images/posts/20250830-Fiddler-Tutorial-2.jpeg)
Web ç•Œé¢
- `Flows` é¢æ¿ï¼šæ˜¾ç¤ºæ‰€æœ‰ HTTP/HTTPS è¯·æ±‚ã€‚    
- ç‚¹å‡»å•ä¸ªè¯·æ±‚ï¼Œå¯æŸ¥çœ‹ï¼š    
    - **Request**ï¼ˆè¯·æ±‚è¡Œã€å¤´ã€bodyï¼‰        
    - **Response**ï¼ˆçŠ¶æ€ç ã€å“åº”å¤´ã€bodyï¼‰        
    - **Details**ï¼ˆåè®®ã€TLSã€å®¢æˆ·ç«¯ç­‰ä¿¡æ¯ï¼‰        
- å¯ä»¥ä¿®æ”¹è¯·æ±‚/å“åº”ï¼Œé‡æ”¾è¯·æ±‚ã€‚
## å¯åŠ¨å‘½ä»¤è¡Œç•Œé¢
```
mitmproxy
```
![](images/posts/20250830-Fiddler-Tutorial-3.jpeg)
å¸¸ç”¨å‘½ä»¤è¡Œ
```bash
ç›‘å¬æŒ‡å®šç«¯å£
mitmproxy -p 8888

æŒ‡å®šä¸Šæ¸¸ä»£ç†
mitmproxy --mode upstream:http://proxy.example.com:3128

ä¿å­˜æµé‡
mitmdump -w capture.mitm

è¯»å–å·²ä¿å­˜çš„æµé‡
mitmproxy -r capture.mitm
```
## åå°æŠ“åŒ…ï¼ˆè¾“å‡ºæ—¥å¿—ï¼‰
```
mitmdump -w flows.mitm
```
(`-w` ä¿å­˜æµé‡æ–‡ä»¶ï¼Œä¹‹åç”¨ `mitmproxy -r flows.mitm` å›æ”¾ï¼‰
![](images/posts/20250830-Fiddler-Tutorial-4.jpeg)
# Python è„šæœ¬æ‰©å±•
mitmproxy çš„æ‰©å±•è¯­è¨€å°±æ˜¯ **Python**ï¼Œä½ æƒ³è¦çš„é€»è¾‘ï¼ˆè§„åˆ™ã€è¿‡æ»¤ã€æ–‡ä»¶ä¿å­˜ã€å›¾ç‰‡æ ¼å¼è½¬æ¢ï¼‰éƒ½å¯ä»¥å†™åœ¨è„šæœ¬é‡Œï¼Œæ¯” Fiddler/Charles æ›´çµæ´»

å†™ä¸€ä¸ªç®€å•çš„æ’ä»¶ `modify.py`ï¼š
```python
from mitmproxy import http

def response(flow: http.HTTPFlow) -> None:
    if "example.com" in flow.request.pretty_url:
        flow.response.text = flow.response.text.replace("Example", "MITMProxy Demo")
```
è¿è¡Œæ—¶åŠ è½½
```bash
mitmdump -s modify.py
```
æ‹¦æˆªæ‰€æœ‰è¿”å›çš„ HTMLï¼ŒæŠŠé‡Œé¢çš„å…³é”®å­—æ›¿æ¢æ‰
è¿™æ ·æ‰€æœ‰ç½‘é¡µé‡Œ "Google" å°±ä¼šè¢«æ›¿æ¢æˆ "MyProxy"ã€‚
```python
from mitmproxy import http

def response(flow: http.HTTPFlow):
    if flow.response and "text/html" in flow.response.headers.get("content-type", ""):
        text = flow.response.text
        text = text.replace("Google", "MyProxy")
        flow.response.text = text
```
è¿è¡Œæ—¶ï¼š
```bash
mitmdump -s script.py
```
## é’ˆå¯¹ä¸åŒç½‘ç«™é¢„è®¾è§„åˆ™

- å¯ä»¥åœ¨ Python è„šæœ¬é‡Œç»´æŠ¤ä¸€ä¸ª JSON/YAML é…ç½®ï¼š
    
    `{   "youtube.com": { "types": ["webp","mp4"], "save_dir": "D:/Youtube/Download" },   "example.com": { "types": ["jpeg","png"], "save_dir": "D:/Example/Img" } }`
    
- åœ¨ `response(flow)` äº‹ä»¶é‡Œæ ¹æ® `flow.request.host` + `æ–‡ä»¶æ‰©å±•å` åˆ¤æ–­æ˜¯å¦ä¿å­˜ã€‚
- è§„åˆ™åœ¨ JSON é…ç½®    
- å—…æ¢æŸä¸ª host ä¸‹çš„ `.webp/.mp4/.jpg/.png`
## è‡ªåŠ¨è½¬æ¢å›¾ç‰‡æ ¼å¼

- ç”¨ Python çš„ **Pillow (PIL)**ï¼š
    
    `from PIL import Image import io  img = Image.open(io.BytesIO(flow.response.content)) img.convert("RGB").save("output.jpg", "JPEG")`
    
- åœ¨ä¿å­˜ä¹‹å‰åˆ¤æ–­ `Content-Type` æ˜¯å¦æ˜¯ webp/tiffï¼Œè‡ªåŠ¨è½¬æˆ jpeg å­˜ç›˜ã€‚
## å…¨è‡ªåŠ¨åå°è¿è¡Œ

- ç”¨ `mitmdump -s script.py` å¯åŠ¨ï¼Œä¸éœ€è¦ UIã€‚
    
- ä½ çš„è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰åŒ¹é…åˆ°çš„æµé‡ï¼Œä¿å­˜åˆ°ç¡¬ç›˜ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¹²é¢„ã€‚
    
- çƒ­é”®/ä¿¡å·å¯éšæ—¶æ§åˆ¶æ˜¯å¦å¯ç”¨ã€‚

## è‡ªåŠ¨ä¿å­˜åˆ°ç¡¬ç›˜å¹¶å‘½å

- `flow.response.content` å°±æ˜¯æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œç›´æ¥ `open(path, "wb").write(content)` å°±è¡Œã€‚
    
- å‘½åè§„èŒƒä½ å¯ä»¥è‡ªå®šä¹‰ï¼Œæ¯”å¦‚ `æ—¶é—´æˆ³ + host + è·¯å¾„hash + åç¼€`ã€‚

## å¿«æ·é”®å¼€å¯/å…³é—­å—…æ¢

- ä½ å¯ä»¥å†™ä¸€ä¸ª**å…¨å±€çƒ­é”®ç›‘å¬å™¨**ï¼ˆPython é‡Œç”¨ `keyboard` æˆ– `pynput` æ¨¡å—ï¼‰æ§åˆ¶ä¸€ä¸ªæ ‡å¿—ä½ `enabled`ï¼Œè„šæœ¬é‡Œåˆ¤æ–­ `if enabled:` æ‰ä¿å­˜ã€‚
    
- æˆ–è€…æ›´ç®€å•ï¼šç›´æ¥ç”¨å‘½ä»¤è¡Œå‚æ•°/é…ç½®æ–‡ä»¶æ¥å¯åŠ¨å’Œåœæ­¢ mitmproxyã€‚
# FAQ
## æ”¯æŒ python è„šæœ¬è¯­è¨€ï¼Œæœ€å¥½çš„ç½‘ç»œå—…æ¢å·¥å…·æœ‰å“ªäº›ï¼Ÿ 
è¦æ±‚æ”¯æŒhttps, æ”¯æŒç”Ÿæˆè¯ä¹¦ï¼Œå·¥å…·é•¿æœŸç¨³å®šç»´æŠ¤ã€‚åˆ—ä¸ªè¡¨æ¯”è¾ƒ

| å·¥å…·åç§°                | æ”¯æŒ Python è„šæœ¬                                                                                                                     | æ”¯æŒ HTTPS æ‹¦æˆªï¼ˆè¯ä¹¦ç”Ÿæˆï¼‰                                                                                                                                                                                 | å¼€å‘è¯­è¨€          | é•¿æœŸç»´æŠ¤æƒ…å†µ                                                                                                                                                                                      | é€‚åˆåœºæ™¯                               |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- |
| **mitmproxy**       | å®Œå…¨æ”¯æŒï¼ˆPython è„šæœ¬ + Addon API )                                                                                                     | å®Œå…¨æ”¯æŒï¼Œå†…ç½® CA ç”Ÿæˆï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰è¯ä¹¦([mitmproxy Documentation](https://docs.mitmproxy.org/stable/?utm_source=chatgpt.com "Introduction"))                                                                       | Python + C    | æ´»è·ƒç»´æŠ¤ä¸­ï¼ˆè¿‘æœŸæ›´æ–°åˆ° v7ã€æ”¯æŒ HTTP/2ã€TCPã€WebSocketï¼‰([mitmproxy](https://mitmproxy.org/posts/releases/mitmproxy7/?utm_source=chatgpt.com "Mitmproxy 7"))                                                 | è‡ªåŠ¨åŒ–æµ‹è¯•ã€å®‰å…¨ç ”ç©¶ã€API ä¿®æ”¹æ‹¦æˆª                |
| **proxy.py**        | æ”¯æŒ Python æ’ä»¶æœºåˆ¶([Proxy.Py](https://proxypy.readthedocs.io/?utm_source=chatgpt.com "Proxy.Py 2.4.11.dev3+gfec682b documentation")) | æ”¯æŒé™æ€ HTTPS æ‹¦æˆªï¼Œå¯ç”Ÿæˆæˆ–ç­¾ç½²è¯ä¹¦([Proxy.Py](https://proxypy.readthedocs.io/?utm_source=chatgpt.com "Proxy.Py 2.4.11.dev3+gfec682b documentation"))                                                          | Python        | å¼€æºç»´æŠ¤ä¸­ï¼ˆDocker æ”¯æŒï¼‰([Proxy.Py](https://proxypy.readthedocs.io/?utm_source=chatgpt.com "Proxy.Py 2.4.11.dev3+gfec682b documentation"))                                                          | è½»é‡çº§ HTTP(S) ä»£ç†ã€å®¹å™¨å†…è°ƒè¯•               |
| **Scapy**           | æ˜¯ï¼ˆPython APIï¼‰([Wikipedia](https://en.wikipedia.org/wiki/Scapy?utm_source=chatgpt.com "Scapy"))                                   | ä¸è‡ªåŠ¨å¤„ç† HTTPS æˆ–ç”Ÿæˆ CAï¼Œé€‚åˆæŠ¥æ–‡çº§æ“ä½œ                                                                                                                                                                        | Python        | æŒç»­æ›´æ–°ï¼ˆ2024æœ€è¿‘ç‰ˆæœ¬ï¼‰([Wikipedia](https://en.wikipedia.org/wiki/Scapy?utm_source=chatgpt.com "Scapy"))                                                                                             | ç½‘ç»œæ¢æµ‹ã€æ„é€ æ•°æ®åŒ…ã€åè®®åˆ†æ                    |
| **Justniffer**      | æ”¯æŒé€šè¿‡è„šæœ¬æ‰©å±•ï¼ˆåŒ…æ‹¬ Pythonï¼‰([Wikipedia](https://en.wikipedia.org/wiki/Justniffer?utm_source=chatgpt.com "Justniffer"))                   | ä¸æ”¯æŒ HTTPS è§£å¯†ï¼ˆä»… TCP å±‚æŠ“åŒ…ï¼‰                                                                                                                                                                           | C / Python æ‰©å±• | æ´»è·ƒï¼Œä½†ä¸»è¦ç”¨äºæ€§èƒ½åˆ†æ                                                                                                                                                                                | TCP å±‚æµé‡åˆ†æä¸æ—¥å¿—è®°å½•                     |
| **Proxyfor (Rust)** | æš‚ä¸æ”¯æŒ Python è„šæœ¬                                                                                                                   | æ”¯æŒ HTTPS æ‹¦æˆªä¸è¯ä¹¦ç”Ÿæˆ([Reddit](https://www.reddit.com/r/rust/comments/1hl2e08?utm_source=chatgpt.com "Proxyfor: A Powerful and Flexible Proxy CLI for HTTP(S) and WS(S) Traffic, with TUI and WebUI")) | Rust          | ç¤¾åŒºæ´»è·ƒï¼ˆè¿‘æœŸè®¨è®ºï¼‰([Reddit](https://www.reddit.com/r/rust/comments/1hl2e08?utm_source=chatgpt.com "Proxyfor: A Powerful and Flexible Proxy CLI for HTTP(S) and WS(S) Traffic, with TUI and WebUI")) | è·¨å¹³å°ã€Web UI å—…æ¢ HTTP/HTTPS/WebSocket |
### **mitmproxyï¼šæœ€å¼ºå¤§**

- **Python è„šæœ¬èƒ½åŠ›æœ€ä¸°å¯Œ**ï¼šå‡ ä¹æ‰€æœ‰è‡ªå®šä¹‰é€»è¾‘éƒ½èƒ½å†™è„šæœ¬å®ç°ã€‚
    
- **HTTPS æ”¯æŒå…¨é¢**ï¼šè‡ªåŠ¨ç”Ÿæˆ CAï¼Œè½»æ¾éƒ¨ç½² HTTPS æŠ“åŒ…ã€‚
    
- **å¼€å‘æ´»è·ƒã€åŠŸèƒ½å…ˆè¿›**ï¼šæ”¯æŒ HTTP/2ã€TCPã€WebSocketï¼Œè·¨å¹³å°ä½“éªŒä¸€è‡´ã€‚
    

### **proxy.pyï¼šè½»é‡æ›¿ä»£**

- æ”¯æŒ Python æ’ä»¶ã€HTTPS æ‹¦æˆªã€è¯ä¹¦ç”Ÿæˆã€‚
    
- é€‚åˆå¿«é€Ÿéƒ¨ç½²ã€é›†æˆåˆ°å·¥å…·é“¾æˆ–å®¹å™¨ç¯å¢ƒä½¿ç”¨ã€‚
    

### **Scapyï¼šåº•å±‚çµæ´»**

- æŠ¥æ–‡çº§æŠ“åŒ…ä¸æ„é€ æ›´çµæ´»ï¼Œä½†ä¸å…·å¤‡è‡ªåŠ¨ HTTPS è§£å¯†èƒ½åŠ›ï¼Œéœ€è¦è‡ªå·±å¤„ç†æ¡æ‰‹ç­‰å·¥ä½œã€‚
    

### **Justnifferï¼šTCP åˆ†æä¸ºä¸»**

- ç®€å• TCP å±‚å—…æ¢ä¸æ—¥å¿—ç”Ÿæˆï¼Œé€‚åˆæ€§èƒ½åˆ†æï¼Œä¸é€‚åˆ HTTPS å†…å®¹å¤„ç†ã€‚
    

### **Proxyforï¼šRust å®ç°æ–°é”è€…**

- æ”¯æŒ HTTPSã€WebSocketï¼Œæœ‰ TUI å’Œ Web UI ç•Œé¢ï¼Œé€‚åˆè·¨å¹³å°ç”¨æˆ·å’Œå–œæ¬¢ Rust çš„å¼€å‘è€…ã€‚
### æ€»ç»“æ¨è

- è‹¥ä½ æƒ³è¦**é«˜åº¦è„šæœ¬åŒ–ï¼‹HTTPS è‡ªåŠ¨æ‹¦æˆª**ï¼Œ**mitmproxy æ˜¯é¦–é€‰**ã€‚
    
- è‹¥ä½ åå¥½è½»é‡éƒ¨ç½²æˆ–å†…åµŒåˆ°å·¥å…·ä¸­ï¼Œ**proxy.py æ˜¯ä¸é”™çš„æ›¿ä»£å“**ã€‚
    
- æŠ¥æ–‡çº§ç²¾ç»†æ§åˆ¶éœ€æ±‚ï¼Œé€‰ **Scapy**ï¼›æ—¥å¿—/æ€§èƒ½åˆ†æåˆ™çœ‹ **Justniffer**ï¼›è·¨å¹³å° GUI æƒ³å°é²œ Rustï¼Œ**proxyfor** å€¼å¾—è¯•è¯•ã€‚
# FAQ
## ä½¿ç”¨proxifier
æ·»åŠ ä¸€ä¸ªproxy server
![](images/posts/20250918-4.jpeg)
ç‚¹check è¿›è¡Œæµ‹è¯•
![](images/posts/20250918-5.jpeg)
æ·»åŠ ä¸€ä¸ªè§„åˆ™
![](images/posts/20250918-6.jpeg)
![](images/posts/20250918-7.jpeg)